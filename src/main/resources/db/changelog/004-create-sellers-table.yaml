databaseChangeLog:
  - changeSet:
      id: 004
      author: moustafa.barakat
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                tableName: sellers
      changes:
        - createTable:
            tableName: sellers
            #            schemaName: public
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    primaryKey: true
              - column:
                  name: producer_id
                  type: uuid
                  constraints:
                    references: producers(id)
                    foreignKeyName: "fk_producer"
                    nullable: false
              - column:
                  name: seller_info_id
                  type: uuid
                  constraints:
                    foreignKeyName: "fk_seller_info"
                    references: seller_infos(id)
              - column:
                  name: state
                  type: varchar(255)
              # Add unique constraint on the combination of producer_id, seller_info_id, and state
        - addUniqueConstraint:
            tableName: sellers
            columnNames: "producer_id, seller_info_id, state"
